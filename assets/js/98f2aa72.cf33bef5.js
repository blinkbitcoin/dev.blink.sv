"use strict";(self.webpackChunkdev_blink_sv=self.webpackChunkdev_blink_sv||[]).push([[4965],{1496:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>r,default:()=>h,frontMatter:()=>s,metadata:()=>o,toc:()=>a});var t=i(4848),l=i(8453);const s={id:"btcpayserver-plugin",title:"BTCPay Server Plugin",slug:"/examples/btcpayserver-plugin"},r=void 0,o={id:"examples/btcpayserver-plugin",title:"BTCPay Server Plugin",description:"Use Blink as a lightning provider in BTCPay Server.",source:"@site/docs/examples/btcpayserver-plugin.md",sourceDirName:"examples",slug:"/examples/btcpayserver-plugin",permalink:"/examples/btcpayserver-plugin",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{id:"btcpayserver-plugin",title:"BTCPay Server Plugin",slug:"/examples/btcpayserver-plugin"},sidebar:"apiSidebar",previous:{title:"ATM Integrations",permalink:"/examples/atm-integrations"},next:{title:"Alby Connector",permalink:"/examples/alby-connector"}},c={},a=[{value:"Video Tutorial",id:"video-tutorial",level:2},{value:"How to Activate the Plugin",id:"how-to-activate-the-plugin",level:2},{value:"How to Connect",id:"how-to-connect",level:2},{value:"Specify the BTC or USD Wallet (Optional)",id:"specify-the-btc-or-usd-wallet-optional",level:3},{value:"Finalize the Connection",id:"finalize-the-connection",level:3},{value:"Enjoy the Benefits of Using Blink",id:"enjoy-the-benefits-of-using-blink",level:2},{value:"Source Code",id:"source-code",level:2},{value:"More Reading",id:"more-reading",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,l.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.p,{children:["Use Blink as a lightning provider in ",(0,t.jsx)(n.a,{href:"https://btcpayserver.org",children:"BTCPay Server"}),".",(0,t.jsx)("br",{}),"\nAdd the default wallet or select between BTC and Stablesats."]}),"\n",(0,t.jsx)(n.p,{children:"Available in BTCPay Server v1.12.0 and later."}),"\n",(0,t.jsx)(n.h2,{id:"video-tutorial",children:"Video Tutorial"}),"\n",(0,t.jsx)(n.p,{children:"Watch the step-by-step video guide on how to use the Blink Plugin for BTCPay Server:"}),"\n",(0,t.jsx)("iframe",{width:"560",height:"315",src:"https://www.youtube.com/embed/uBrmsE4yt2E",title:"How to use the Blink Plugin for BTCPay Server",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowFullScreen:!0}),"\n",(0,t.jsx)(n.h2,{id:"how-to-activate-the-plugin",children:"How to Activate the Plugin"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"login to the BTCPay Server instance as an admin user"}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["select ",(0,t.jsx)(n.code,{children:"Manage Plugins"})," in the left sidebar and install the Blink plugin:"]}),"\n",(0,t.jsx)("img",{alt:"BTCPay Server plugin",src:"/img/btcpayserver_plugin.png",width:"600"}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"restart the BTCPay Server instance."}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"how-to-connect",children:"How to Connect"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Create an API key on ",(0,t.jsx)(n.a,{href:"https://dashboard.blink.sv",children:"dashboard.blink.sv"})]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"log in with your registered email or a phone number or create a new account if you are new to Blink"}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"select API Keys in the menu on the left"}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["create an API key with the ",(0,t.jsx)(n.code,{children:"+"})," button"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["for the most secure option choose the ",(0,t.jsx)(n.code,{children:"Read"})," and ",(0,t.jsx)(n.code,{children:"Receive"})," scopes - this will allow to create invoices and receive payments to your Blink account, but will not be allowed to send payments with the BTCPay Server plugin.",(0,t.jsx)("br",{}),"\nCurrently using only the ",(0,t.jsx)(n.code,{children:"Read"})," scope also works, but it is better to add the ",(0,t.jsx)(n.code,{children:"Receive"})," scope as well to ensure compatibility in the future when the plugin is updated.",(0,t.jsx)("br",{}),"\nOnly use the ",(0,t.jsx)(n.code,{children:"Write"})," scope if you are planning to send payments from BTCPay Server for example with ",(0,t.jsx)(n.code,{children:"Pull Payments"})," or connecting bolt cards. Be aware that the BTCPay Server admin can access your API key therefore could spend your balance when using the ",(0,t.jsx)(n.code,{children:"Write"})," scope. The best is to use a self-hosted BTCPay Server instance for this purpose."]}),"\n",(0,t.jsx)("img",{alt:"Read and Receive key",src:"/img/auth_api_key_read_receive.png",width:"800"},!0),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"the BTCPay connection strings contain the API key and the ID of the chosen wallet in the format ready to be pasted in the BTCPay Server interface:"}),"\n",(0,t.jsx)("img",{src:"/img/auth_api_key.png",alt:"API key",width:"800"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"the option to connect to their Blink will be available for logged in users under:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["in  case of a new store:",(0,t.jsx)("br",{}),"\n",(0,t.jsx)(n.code,{children:"Set up a lightning node"})," \u2192 ",(0,t.jsx)(n.code,{children:"Use custom node"})]}),"\n",(0,t.jsxs)(n.li,{children:["in case of an existing store:",(0,t.jsx)("br",{}),"\n",(0,t.jsx)(n.code,{children:"Lightning"})," \u2192 ",(0,t.jsx)(n.code,{children:"Settings"})," \u2192 ",(0,t.jsx)(n.code,{children:"Change connection"})," \u2192 ",(0,t.jsx)(n.code,{children:"Use custom node"})]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"the connection string for BTCPay Server is minimum:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"type=blink;api-key=blink_...\n"})}),"\n",(0,t.jsx)("img",{alt:"BTCPay Server plugin",src:"/img/btcpayserver_plugin_connect.png",width:"800"}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["If adding only the API key the default wallet will be used on the Blink server (",(0,t.jsx)(n.a,{href:"https://api.blink.sv/graphql",children:"https://api.blink.sv/graphql"}),")."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["the default wallet can be changed in the Blink app under ",(0,t.jsx)(n.code,{children:"Settings"})," \u2192 ",(0,t.jsx)(n.code,{children:"Default wallet"}),", but this would only affect the BTCPay Plugin when the connection string is reloaded."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.admonition,{type:"note",children:(0,t.jsx)(n.p,{children:"If using the USD wallet the requested invoice amount needs to be at least 1 USDcent even if you are using another fiat denomination or SATS."})}),"\n",(0,t.jsx)(n.h3,{id:"specify-the-btc-or-usd-wallet-optional",children:"Specify the BTC or USD Wallet (Optional)"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["to use a specific wallet (BTC or USD) use the specific BTCPay connection string with the Wallet Id included or copy the chosen the Wallet Id from your ",(0,t.jsx)(n.a,{href:"https://dashboard.blink.sv",children:"dashboard.blink.sv"})]}),"\n",(0,t.jsx)("img",{alt:"Dashboard wallets",src:"/img/dashboard_wallets.png",width:"800"}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"use the full connection string as:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"type=blink;server=https://api.blink.sv/graphql;api-key=blink_...;wallet-id=xyz\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"can also set a custom server for development or to use an other instance of the Galoy backend"}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"finalize-the-connection",children:"Finalize the Connection"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Click ",(0,t.jsx)(n.code,{children:"Test connection"})," to verify the connection"]}),"\n",(0,t.jsx)(n.p,{children:"The message:"}),"\n",(0,t.jsx)("img",{alt:"BTCPay Server plugin successful",src:"/img/btcpayserver_plugin_successful.png",width:"800"}),"\n",(0,t.jsx)(n.p,{children:"is expected as the Blink plugin is connected to a Blink account, not a lightning node directly, but the connection is working."}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Click ",(0,t.jsx)(n.code,{children:"Save"})," to save the connection."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"enjoy-the-benefits-of-using-blink",children:"Enjoy the Benefits of Using Blink"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"instant inbound lightning liquidity"}),"\n",(0,t.jsx)(n.li,{children:"no channel management"}),"\n",(0,t.jsx)(n.li,{children:"no need to worry about backups"}),"\n",(0,t.jsx)(n.li,{children:"get notified of the received payments in the Blink app"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"source-code",children:"Source Code"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.a,{href:"https://github.com/Kukks/BTCPayServerPlugins/tree/master/Plugins/BTCPayServer.Plugins.Blink",children:"github.com/Kukks/BTCPayServerPlugins/tree/master/Plugins/BTCPayServer.Plugins.Blink"})}),"\n",(0,t.jsx)(n.h2,{id:"more-reading",children:"More Reading"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://blink.sv/btcpay",children:"blink.sv/btcpay"})}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>r,x:()=>o});var t=i(6540);const l={},s=t.createContext(l);function r(e){const n=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:r(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);